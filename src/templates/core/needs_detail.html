{% extends "base.html" %}
{% load i18n social_share %}

{% block meta %}
    <meta property="og:url" content="{{ og_url }}" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="{% blocktranslate with name=object.good.name quantity=object.get_quantity_display unit=object.get_unit_display poi=object.poi.name %}As a part of our aid to refugees, we need: {{ name }} {{ quantity }}{{ unit }} in: {{ poi }}{% endblocktranslate %}" />
    <meta property="og:image" content="https://sfn-project.org/static/sfn.png?1" />
    <meta property="og:image:width" content="1080" />
    <meta property="og:image:height" content="1080" />
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col"></div>
        <div class="col">
            <table class="table">
              <tbody>
                <tr><th scope="col">{% translate "Goods.name" %}</th><td>{{ object.good.name }}</td></tr>
                <tr><th scope="col">{% translate "Needs.quantity" %}</th><td>{{ object.get_quantity_display }} {{ object.get_unit_display }}</td></tr>
                <tr><th scope="col">{% translate "BaseModel.created_at" %}</th><td>{{ object.created_at }}</td></tr>
                <tr><th scope="col">{% translate "Poi.name" %}</th><td>{{ object.poi.name }}</td></tr>
                <tr><th scope="col">{% translate "Poi.description" %}</th><td>{{ object.poi.description }}</td></tr>
                <tr><th scope="col">{% translate "Poi.contact" %}</th><td>{{ object.poi.contact }}</td></tr>

                <tr>
                    <th scope="col">
                        {%  translate "Share" %}
                    </th>
                    {% translate "Share on Facebook" as share_on_facebook %}
                    <td>{% post_to_facebook need share_on_facebook %}</td>
                </tr>
                {% if user.is_authenticated %}
                    <tr>
                        <td></td>
                        <td>
                            <form action={% url 'needs' %}?need_id={{ need.id }} method="post">
                                {% csrf_token %}
                                <div class="modal fade" id="fullfull{{ need.id }}" tabindex="-1" aria-labelledby="fullfull{{ need.id }}" aria-hidden="true">
                                  <div class="modal-dialog">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title" id="fullfull{{ need.id }}">{% translate "Fulfill" %}</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                      </div>
                                      <div class="modal-body">
                                        {% translate "By clicking fullfill you commit to provide this need. Are you sure?" %}
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% translate "Close" %}</button>
                                        <input type="submit" value={% translate "Fulfill" %} class="btn btn-warning">
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <button type="button" class="btn bg-ua-rev" data-bs-toggle="modal" data-bs-target="#fullfull{{ need.id }}">{% translate "Fulfill" %}</button>
                            </form>
                        </td>
                    </tr>
                {% endif %}
              </tbody>
            </table>
        </div>
        <div class="col"></div>
    </div>

{% endblock %}
